# Admin Toolbox

Создает изолированное окружение с необходимыми инструментами для работы с инфраструктурой.

При работе утилит используются конфигурационные файлы, которые находятся в рабочей директории проекта, в следствие чего не затрагиваются глобальные пользовательские настройки (можно использовать ansible с разными конфигурациями, аутентификация kubectl не затрагивает ~/.kube/config и т.д.).

## Установка

Установка производится в отдельный каталог, по-умолчанию `~/.admin-toolbox`, и никак не затрагивает существующие файлы и настройки.

Для установки требуется запустить `./install.py -a <путь к рабочему репозиторию ansible>`, никаких дополнительных зависимостей не требуется.

По-умолчанию для скачивания утилит используется прокси, выключить его можно убрав адрес `[http_proxy] http_addr` из `config.ini`.

## Использование

В .zshrc или .bashrc следует добавить:

```bash
alias toolbox="source ~/.admin-toolbox/activate"
```

После:

```bash
source ~/.zshrc
toolbox
```

### Доступные команды

`vault-login <username>` - логин в vault

`vault-logout`

`$ans` - переменная окружения, которая ведет в директорию с ansible

`deactivate` - выход из окружения

## Конфигурация

Управление версиями, ссылками на бинарники и репозитории, управление закачкой через proxy осуществляется в `config.ini`.

По-умолчанию устанавливается в `~/.admin-toolbox`, доступно указание другой рабочей директории через флаг `-w`.


## Как работает

Работает аналогично python env окружениям, после запуска `activate` появляется доступ ко всем нужным программам и становятся доступными некоторые команды (через подмену переменных окружения, в т.ч. PATH). При `deactivate` старые переменные окружения возвращаются.
